(function(e){var t=function(t,n,r){this.baseUrl="https://api.twitch.tv/kraken/streams/";this.element=e(t);this.streamers=n;this.options=e.extend({},this.defaults,r);this.requestStreamer()};t.prototype={defaults:{startVolume:25,autoPlay:true,width:620,height:378,onLive:function(e,t){},onOffline:function(e,t){}},requestStreamer:function(){var t=this.streamers;var n=this.baseUrl+t;var r=this.buildEmbedCode(t);this.element.html(r);var i=this;e.ajax({url:n,dataType:"jsonp",jsonp:"jsonp",success:function(e){if(e.length>0){i.options.onLive(i.element,t)}else{i.options.onOffline(i.element,t)}},error:function(e){i.options.onOffline(this.element,t)}})},buildEmbedCode:function(t){var n=e("<object/>",{type:"application/x-shockwave-flash",id:"live_embed_player_flash"});n.attr("height",this.options.height);n.attr("width",this.options.width);n.attr("data","http://www.twitch.tv/widgets/live_embed_player.swf?channel="+t);n.append(e("<param/>",{name:"allowFullScreen",value:"true"}));n.append(e("<param/>",{name:"allowScriptAccess",value:"always"}));n.append(e("<param/>",{name:"allowNetworking",value:"all"}));n.append(e("<param/>",{name:"movie",value:"http://www.twitch.tv/widgets/live_embed_player.swf"}));n.append(e("<param/>",{name:"flashvars",value:e.param({hostname:"www.twitch.tv",channel:t,enable_javascript:"true",auto_play:this.options.autoPlay?"true":"false",start_volume:this.options.startVolume})}));return n}};e.fn.livestream=function(e,n){this.each(function(){new t(this,e,n)});return this}})(jQuery)